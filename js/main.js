'use strict';

if (window.location.pathname === '/notas' || window.location.pathname === '/notas.html') {
  var estilo = document.getElementById('estilo');
  var bienestar = document.getElementById('bienestar');
  var tendencias = document.getElementById('tendencias');
  var contenedorEstilo = document.getElementById('contenedor-estilo');
  var contenedorBienestar = document.getElementById('contenedor-bienestar');
  var contenedorTendencias = document.getElementById('contenedor-tendencias');

  estilo.addEventListener('click', function () {
    contenedorEstilo.classList.remove('blog__seccion--oculta');
    contenedorBienestar.classList.add('blog__seccion--oculta');
    contenedorTendencias.classList.add('blog__seccion--oculta');
  });
  bienestar.addEventListener('click', function () {
    contenedorEstilo.classList.add('blog__seccion--oculta');
    contenedorBienestar.classList.remove('blog__seccion--oculta');
    contenedorTendencias.classList.add('blog__seccion--oculta');
  });
  tendencias.addEventListener('click', function () {
    contenedorEstilo.classList.add('blog__seccion--oculta');
    contenedorBienestar.classList.add('blog__seccion--oculta');
    contenedorTendencias.classList.remove('blog__seccion--oculta');
  });
}

var doc = document.documentElement;
var main = document.getElementsByTagName('main');
var menu = document.getElementById('menu');
var bottonMenu = document.getElementById('botton-menu');
var navegacionPrincipal = document.getElementById('navegacion-principal');
var submenu = document.getElementById('submenu');
var nosotros = document.getElementById('nosotros');
var nosotrosItem = document.getElementById('nosotros-item');
var arriba = document.getElementById('arriba');
var fase1 = document.getElementById('fase1');
var fase2 = document.getElementById('fase2');
var contenedorFlecha1 = document.getElementById('contenedor-flecha1');
var contenedorFlecha2 = document.getElementById('contenedor-flecha2');
var flecha1 = document.getElementById('flecha1');
var flecha2 = document.getElementById('flecha2');
var contenidoFase1 = document.getElementById('contenido-fase1');
var contenidoFase2 = document.getElementById('contenido-fase2');

var expandirMenu = function expandirMenu() {
  bottonMenu.classList.toggle('botton-menu__logo--cerrar');
  navegacionPrincipal.classList.toggle('navegacion-principal--extendida');
  navegacionPrincipal.classList.remove('navegacion-principal--extendida2');
  nosotrosItem.classList.remove('navegacion-principal__nosotros--giro');
  submenu.classList.remove('navegacion-principal__dos--extendida');
};

var expandirSubmenu = function expandirSubmenu() {
  nosotrosItem.classList.toggle('navegacion-principal__nosotros--giro');
  navegacionPrincipal.classList.toggle('navegacion-principal--extendida2');
  submenu.classList.toggle('navegacion-principal__dos--extendida');
};

var cerrarMenu = function cerrarMenu() {
  bottonMenu.classList.remove('botton-menu__logo--cerrar');
  navegacionPrincipal.classList.remove('navegacion-principal--extendida');
  navegacionPrincipal.classList.remove('navegacion-principal--extendida2');
  nosotrosItem.classList.remove('navegacion-principal__nosotros--giro');
  submenu.classList.remove('navegacion-principal__dos--extendida');
};

var subir = function subir(id) {
  if (id === 'fase2' || id === 'flecha2' || id === 'contenedor-flecha2') {
    console.log(id);
    doc.scrollTop = 420;
  } else {
    var scrollStep = -window.scrollY / (500 / 3);
    var scrollInterval = setInterval(function () {
      if (window.scrollY !== 0) {
        window.scrollBy(500, scrollStep);
      } else clearInterval(scrollInterval);
    }, 1);
  }
};

var bajar = function bajar(scroll) {
  var bajar = setInterval(function () {
    doc.scrollTop += scroll / 40;
    if (doc.scrollTop > scroll || doc.clientHeight < 1000) {
      clearInterval(bajar);
    }
  }, 10);
};

var mostrarBotonArriba = function mostrarBotonArriba() {
  if (document.documentElement.scrollTop > 400 && arriba) {
    arriba.style.right = '1em';
  } else {
    arriba.style.right = '-5em';
  }
};

var mostrarFase = function mostrarFase(e) {
  e.stopPropagation();

  var id = e.target.id;

  if (id === 'fase1' || id === 'flecha1' || id === 'contenedor-flecha1') {
    contenidoFase1.classList.toggle('responsabilidad__contenido--extendido');
    contenidoFase2.classList.remove('responsabilidad__contenido--extendido');
    bajar(420);
  }

  if (id === 'fase2' || id === 'flecha2' || id === 'contenedor-flecha2') {
    contenidoFase2.classList.toggle('responsabilidad__contenido--extendido');
    contenidoFase1.classList.remove('responsabilidad__contenido--extendido');
    if (doc.scrollTop < 600) {
      bajar(600);
    } else {
      subir(id);
    }
  }
};

menu.addEventListener('click', function () {
  return expandirMenu();
});
nosotros.addEventListener('click', function () {
  return expandirSubmenu();
});
window.addEventListener('scroll', function () {
  return mostrarBotonArriba();
});
if (fase1) fase1.addEventListener('click', function (e) {
  return mostrarFase(e);
});
if (fase2) fase2.addEventListener('click', function (e) {
  return mostrarFase(e);
});
if (contenedorFlecha1) contenedorFlecha1.addEventListener('click', function (e) {
  return mostrarFase(e);
});
if (contenedorFlecha2) contenedorFlecha2.addEventListener('click', function (e) {
  return mostrarFase(e);
});
if (flecha1) flecha1.addEventListener('click', function (e) {
  return mostrarFase(e);
});
if (flecha2) flecha2.addEventListener('click', function (e) {
  return mostrarFase(e);
});
if (arriba) arriba.addEventListener('click', function (e) {
  return subir(e);
});
main[0].addEventListener('click', function () {
  return cerrarMenu();
});

if (window.location.pathname.includes('productos') || window.location.pathname === '/prueba-liv/' || window.location.pathname === '/') {
  // const bottonSlider = document.getElementById('botton-slider')
  var productos = Array.from(document.getElementsByClassName('slider-productos__imagen'));
  var anterior = document.getElementById('boton-anterior');
  var siguiente = document.getElementById('boton-siguiente');
  var sliderProductos = void 0;

  var recorrerClases = function recorrerClases() {
    productos.forEach(function (item, index) {
      item.style.zIndex = '' + index;
      if (index === 0) {
        item.classList.add('slider-productos__imagen--transparente');
      } else {
        item.classList.remove('slider-productos__imagen--transparente');
      }
    });
  };

  var agragarSlider = function agragarSlider() {
    sliderProductos = setInterval(function () {
      productos[productos.length - 1].classList.add('slider-productos__imagen--transparente');
      setTimeout(function () {
        var ultimo = productos.pop();
        productos.unshift(ultimo);
        productos[0].classList.remove('slider-productos__imagen--transparente');
        recorrerClases();
      }, 400);
    }, 5000);
  };

  var productoAnterior = function productoAnterior() {
    clearInterval(sliderProductos);
    var primero = productos.shift();
    productos.push(primero);
    recorrerClases();
    agragarSlider();
  };

  var productoSiguiente = function productoSiguiente() {
    clearInterval(sliderProductos);
    var ultimo = productos.pop();
    ultimo.classList.add('slider-productos__imagen--transparente');
    productos.unshift(ultimo);
    setTimeout(function () {
      recorrerClases();
    }, 400);
    agragarSlider();
  };

  recorrerClases();
  agragarSlider();

  if (anterior) anterior.addEventListener('click', function () {
    return productoAnterior();
  });
  if (siguiente) siguiente.addEventListener('click', function () {
    return productoSiguiente();
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJsb2cuanMiLCJtYWluLmpzIiwic2xpZGVyLXByb2R1Y3Rvcy5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiZXN0aWxvIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJpZW5lc3RhciIsInRlbmRlbmNpYXMiLCJjb250ZW5lZG9yRXN0aWxvIiwiY29udGVuZWRvckJpZW5lc3RhciIsImNvbnRlbmVkb3JUZW5kZW5jaWFzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsIm1haW4iLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm1lbnUiLCJib3R0b25NZW51IiwibmF2ZWdhY2lvblByaW5jaXBhbCIsInN1Ym1lbnUiLCJub3NvdHJvcyIsIm5vc290cm9zSXRlbSIsImFycmliYSIsImZhc2UxIiwiZmFzZTIiLCJjb250ZW5lZG9yRmxlY2hhMSIsImNvbnRlbmVkb3JGbGVjaGEyIiwiZmxlY2hhMSIsImZsZWNoYTIiLCJjb250ZW5pZG9GYXNlMSIsImNvbnRlbmlkb0Zhc2UyIiwiZXhwYW5kaXJNZW51IiwidG9nZ2xlIiwiZXhwYW5kaXJTdWJtZW51IiwiY2VycmFyTWVudSIsInN1YmlyIiwiaWQiLCJjb25zb2xlIiwibG9nIiwic2Nyb2xsVG9wIiwic2Nyb2xsU3RlcCIsInNjcm9sbFkiLCJzY3JvbGxJbnRlcnZhbCIsInNldEludGVydmFsIiwic2Nyb2xsQnkiLCJjbGVhckludGVydmFsIiwiYmFqYXIiLCJzY3JvbGwiLCJjbGllbnRIZWlnaHQiLCJtb3N0cmFyQm90b25BcnJpYmEiLCJzdHlsZSIsInJpZ2h0IiwibW9zdHJhckZhc2UiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwidGFyZ2V0IiwiaW5jbHVkZXMiLCJwcm9kdWN0b3MiLCJBcnJheSIsImZyb20iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYW50ZXJpb3IiLCJzaWd1aWVudGUiLCJzbGlkZXJQcm9kdWN0b3MiLCJyZWNvcnJlckNsYXNlcyIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJ6SW5kZXgiLCJhZ3JhZ2FyU2xpZGVyIiwibGVuZ3RoIiwic2V0VGltZW91dCIsInVsdGltbyIsInBvcCIsInVuc2hpZnQiLCJwcm9kdWN0b0FudGVyaW9yIiwicHJpbWVybyIsInNoaWZ0IiwicHVzaCIsInByb2R1Y3RvU2lndWllbnRlIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLE9BQUFDLFFBQUEsQ0FBQUMsUUFBQSxLQUFBLFFBQUEsSUFDQUYsT0FBQUMsUUFBQSxDQUFBQyxRQUFBLEtBQUEsYUFEQSxFQUNBO0FBQ0EsTUFBQUMsU0FBQUMsU0FBQUMsY0FBQSxDQUFBLFFBQUEsQ0FBQTtBQUNBLE1BQUFDLFlBQUFGLFNBQUFDLGNBQUEsQ0FBQSxXQUFBLENBQUE7QUFDQSxNQUFBRSxhQUFBSCxTQUFBQyxjQUFBLENBQUEsWUFBQSxDQUFBO0FBQ0EsTUFBQUcsbUJBQUFKLFNBQUFDLGNBQUEsQ0FBQSxtQkFBQSxDQUFBO0FBQ0EsTUFBQUksc0JBQUFMLFNBQUFDLGNBQUEsQ0FBQSxzQkFBQSxDQUFBO0FBQ0EsTUFBQUssdUJBQUFOLFNBQUFDLGNBQUEsQ0FBQSx1QkFBQSxDQUFBOztBQUVBRixTQUFBUSxnQkFBQSxDQUFBLE9BQUEsRUFBQSxZQUFBO0FBQ0FILHFCQUFBSSxTQUFBLENBQUFDLE1BQUEsQ0FBQSx1QkFBQTtBQUNBSix3QkFBQUcsU0FBQSxDQUFBRSxHQUFBLENBQUEsdUJBQUE7QUFDQUoseUJBQUFFLFNBQUEsQ0FBQUUsR0FBQSxDQUFBLHVCQUFBO0FBQ0EsR0FKQTtBQUtBUixZQUFBSyxnQkFBQSxDQUFBLE9BQUEsRUFBQSxZQUFBO0FBQ0FILHFCQUFBSSxTQUFBLENBQUFFLEdBQUEsQ0FBQSx1QkFBQTtBQUNBTCx3QkFBQUcsU0FBQSxDQUFBQyxNQUFBLENBQUEsdUJBQUE7QUFDQUgseUJBQUFFLFNBQUEsQ0FBQUUsR0FBQSxDQUFBLHVCQUFBO0FBQ0Es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YXRpb24ucGF0aG5hbWUgPT09ICcvbm90YXMnIHx8XG4gICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL25vdGFzLmh0bWwnKSB7XG4gIGNvbnN0IGVzdGlsbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlc3RpbG8nKVxuICBjb25zdCBiaWVuZXN0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmllbmVzdGFyJylcbiAgY29uc3QgdGVuZGVuY2lhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW5kZW5jaWFzJylcbiAgY29uc3QgY29udGVuZWRvckVzdGlsbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW5lZG9yLWVzdGlsbycpXG4gIGNvbnN0IGNvbnRlbmVkb3JCaWVuZXN0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVuZWRvci1iaWVuZXN0YXInKVxuICBjb25zdCBjb250ZW5lZG9yVGVuZGVuY2lhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW5lZG9yLXRlbmRlbmNpYXMnKVxuXG4gIGVzdGlsby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb250ZW5lZG9yRXN0aWxvLmNsYXNzTGlzdC5yZW1vdmUoJ2Jsb2dfX3NlY2Npb24tLW9jdWx0YScpXG4gICAgY29udGVuZWRvckJpZW5lc3Rhci5jbGFzc0xpc3QuYWRkKCdibG9nX19zZWNjaW9uLS1vY3VsdGEnKVxuICAgIGNvbnRlbmVkb3JUZW5kZW5jaWFzLmNsYXNzTGlzdC5hZGQoJ2Jsb2dfX3NlY2Npb24tLW9jdWx0YScpXG4gIH0pXG4gIGJpZW5lc3Rhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb250ZW5lZG9yRXN0aWxvLmNsYXNzTGlzdC5hZGQoJ2Jsb2dfX3NlY2Npb24tLW9jdWx0YScpXG4gICAgY29udGVuZWRvckJpZW5lc3Rhci5jbGFzc0xpc3QucmVtb3ZlKCdibG9nX19zZWNjaW9uLS1vY3VsdGEnKVxuICAgIGNvbnRlbmVkb3JUZW5kZW5jaWFzLmNsYXNzTGlzdC5hZGQoJ2Jsb2dfX3NlY2Npb24tLW9jdWx0YScpXG4gIH0pXG4gIHRlbmRlbmNpYXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29udGVuZWRvckVzdGlsby5jbGFzc0xpc3QuYWRkKCdibG9nX19zZWNjaW9uLS1vY3VsdGEnKVxuICAgIGNvbnRlbmVkb3JCaWVuZXN0YXIuY2xhc3NMaXN0LmFkZCgnYmxvZ19fc2VjY2lvbi0tb2N1bHRhJylcbiAgICBjb250ZW5lZG9yVGVuZGVuY2lhcy5jbGFzc0xpc3QucmVtb3ZlKCdibG9nX19zZWNjaW9uLS1vY3VsdGEnKVxuICB9KVxufVxuIiwiY29uc3QgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG5jb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21haW4nKVxuY29uc3QgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51JylcbmNvbnN0IGJvdHRvbk1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm90dG9uLW1lbnUnKVxuY29uc3QgbmF2ZWdhY2lvblByaW5jaXBhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZlZ2FjaW9uLXByaW5jaXBhbCcpXG5jb25zdCBzdWJtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1lbnUnKVxuY29uc3Qgbm9zb3Ryb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9zb3Ryb3MnKVxuY29uc3Qgbm9zb3Ryb3NJdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vc290cm9zLWl0ZW0nKVxuY29uc3QgYXJyaWJhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FycmliYScpXG5jb25zdCBmYXNlMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYXNlMScpXG5jb25zdCBmYXNlMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYXNlMicpXG5jb25zdCBjb250ZW5lZG9yRmxlY2hhMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW5lZG9yLWZsZWNoYTEnKVxuY29uc3QgY29udGVuZWRvckZsZWNoYTIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVuZWRvci1mbGVjaGEyJylcbmNvbnN0IGZsZWNoYTEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxlY2hhMScpXG5jb25zdCBmbGVjaGEyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsZWNoYTInKVxuY29uc3QgY29udGVuaWRvRmFzZTEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVuaWRvLWZhc2UxJylcbmNvbnN0IGNvbnRlbmlkb0Zhc2UyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbmlkby1mYXNlMicpXG5cbmNvbnN0IGV4cGFuZGlyTWVudSA9ICgpID0+IHtcbiAgYm90dG9uTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdib3R0b24tbWVudV9fbG9nby0tY2VycmFyJylcbiAgbmF2ZWdhY2lvblByaW5jaXBhbC5jbGFzc0xpc3QudG9nZ2xlKCduYXZlZ2FjaW9uLXByaW5jaXBhbC0tZXh0ZW5kaWRhJylcbiAgbmF2ZWdhY2lvblByaW5jaXBhbC5jbGFzc0xpc3QucmVtb3ZlKCduYXZlZ2FjaW9uLXByaW5jaXBhbC0tZXh0ZW5kaWRhMicpXG4gIG5vc290cm9zSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCduYXZlZ2FjaW9uLXByaW5jaXBhbF9fbm9zb3Ryb3MtLWdpcm8nKVxuICBzdWJtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ25hdmVnYWNpb24tcHJpbmNpcGFsX19kb3MtLWV4dGVuZGlkYScpXG59XG5cbmNvbnN0IGV4cGFuZGlyU3VibWVudSA9ICgpID0+IHtcbiAgbm9zb3Ryb3NJdGVtLmNsYXNzTGlzdC50b2dnbGUoJ25hdmVnYWNpb24tcHJpbmNpcGFsX19ub3NvdHJvcy0tZ2lybycpXG4gIG5hdmVnYWNpb25QcmluY2lwYWwuY2xhc3NMaXN0LnRvZ2dsZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWwtLWV4dGVuZGlkYTInKVxuICBzdWJtZW51LmNsYXNzTGlzdC50b2dnbGUoJ25hdmVnYWNpb24tcHJpbmNpcGFsX19kb3MtLWV4dGVuZGlkYScpXG59XG5cbmNvbnN0IGNlcnJhck1lbnUgPSAoKSA9PiB7XG4gIGJvdHRvbk1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYm90dG9uLW1lbnVfX2xvZ28tLWNlcnJhcicpXG4gIG5hdmVnYWNpb25QcmluY2lwYWwuY2xhc3NMaXN0LnJlbW92ZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWwtLWV4dGVuZGlkYScpXG4gIG5hdmVnYWNpb25QcmluY2lwYWwuY2xhc3NMaXN0LnJlbW92ZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWwtLWV4dGVuZGlkYTInKVxuICBub3NvdHJvc0l0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWxfX25vc290cm9zLS1naXJvJylcbiAgc3VibWVudS5jbGFzc0xpc3QucmVtb3ZlKCduYXZlZ2FjaW9uLXByaW5jaXBhbF9fZG9zLS1leHRlbmRpZGEnKVxufVxuXG5jb25zdCBzdWJpciA9IChpZCkgPT4ge1xuICBpZiAoaWQgPT09ICdmYXNlMicgfHwgaWQgPT09ICdmbGVjaGEyJyB8fCBpZCA9PT0gJ2NvbnRlbmVkb3ItZmxlY2hhMicpIHtcbiAgICBjb25zb2xlLmxvZyhpZClcbiAgICBkb2Muc2Nyb2xsVG9wID0gNDIwXG4gIH0gZWxzZSB7XG4gICAgbGV0IHNjcm9sbFN0ZXAgPSAtd2luZG93LnNjcm9sbFkgLyAoNTAwIC8gMylcbiAgICBsZXQgc2Nyb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAod2luZG93LnNjcm9sbFkgIT09IDApIHtcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KDUwMCwgc2Nyb2xsU3RlcClcbiAgICAgIH0gZWxzZSBjbGVhckludGVydmFsKHNjcm9sbEludGVydmFsKVxuICAgIH0sIDEpXG4gIH1cbn1cblxuY29uc3QgYmFqYXIgPSAoc2Nyb2xsKSA9PiB7XG4gIGxldCBiYWphciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBkb2Muc2Nyb2xsVG9wICs9IHNjcm9sbCAvIDQwXG4gICAgaWYgKGRvYy5zY3JvbGxUb3AgPiBzY3JvbGwgfHwgZG9jLmNsaWVudEhlaWdodCA8IDEwMDApIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoYmFqYXIpXG4gICAgfVxuICB9LCAxMClcbn1cblxuY29uc3QgbW9zdHJhckJvdG9uQXJyaWJhID0gKCkgPT4ge1xuICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IDQwMCAmJiBhcnJpYmEpIHtcbiAgICBhcnJpYmEuc3R5bGUucmlnaHQgPSAnMWVtJ1xuICB9IGVsc2Uge1xuICAgIGFycmliYS5zdHlsZS5yaWdodCA9ICctNWVtJ1xuICB9XG59XG5cbmNvbnN0IG1vc3RyYXJGYXNlID0gKGUpID0+IHtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG4gIGxldCBpZCA9IGUudGFyZ2V0LmlkXG5cbiAgaWYgKGlkID09PSAnZmFzZTEnIHx8IGlkID09PSAnZmxlY2hhMScgfHwgaWQgPT09ICdjb250ZW5lZG9yLWZsZWNoYTEnKSB7XG4gICAgY29udGVuaWRvRmFzZTEuY2xhc3NMaXN0LnRvZ2dsZSgncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpXG4gICAgY29udGVuaWRvRmFzZTIuY2xhc3NMaXN0LnJlbW92ZSgncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpXG4gICAgYmFqYXIoNDIwKVxuICB9XG5cbiAgaWYgKGlkID09PSAnZmFzZTInIHx8IGlkID09PSAnZmxlY2hhMicgfHwgaWQgPT09ICdjb250ZW5lZG9yLWZsZWNoYTInKSB7XG4gICAgY29udGVuaWRvRmFzZTIuY2xhc3NMaXN0LnRvZ2dsZSgncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpXG4gICAgY29udGVuaWRvRmFzZTEuY2xhc3NMaXN0LnJlbW92ZSgncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpXG4gICAgaWYgKGRvYy5zY3JvbGxUb3AgPCA2MDApIHtcbiAgICAgIGJhamFyKDYwMClcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViaXIoaWQpXG4gICAgfVxuICB9XG59XG5cbm1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBleHBhbmRpck1lbnUoKSlcbm5vc290cm9zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZXhwYW5kaXJTdWJtZW51KCkpXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4gbW9zdHJhckJvdG9uQXJyaWJhKCkpXG5pZiAoZmFzZTEpIGZhc2UxLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IG1vc3RyYXJGYXNlKGUpKVxuaWYgKGZhc2UyKSBmYXNlMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBtb3N0cmFyRmFzZShlKSlcbmlmIChjb250ZW5lZG9yRmxlY2hhMSkgY29udGVuZWRvckZsZWNoYTEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gbW9zdHJhckZhc2UoZSkpXG5pZiAoY29udGVuZWRvckZsZWNoYTIpIGNvbnRlbmVkb3JGbGVjaGEyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IG1vc3RyYXJGYXNlKGUpKVxuaWYgKGZsZWNoYTEpIGZsZWNoYTEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gbW9zdHJhckZhc2UoZSkpXG5pZiAoZmxlY2hhMikgZmxlY2hhMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBtb3N0cmFyRmFzZShlKSlcbmlmIChhcnJpYmEpIGFycmliYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBzdWJpcihlKSlcbm1haW5bMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjZXJyYXJNZW51KCkpXG4iLCJpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCdwcm9kdWN0b3MnKSB8fFxuICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9wcnVlYmEtbGl2LycgfHxcbiAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvJykge1xuICAvLyBjb25zdCBib3R0b25TbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm90dG9uLXNsaWRlcicpXG4gIGNvbnN0IHByb2R1Y3RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2xpZGVyLXByb2R1Y3Rvc19faW1hZ2VuJykpXG4gIGNvbnN0IGFudGVyaW9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvdG9uLWFudGVyaW9yJylcbiAgY29uc3Qgc2lndWllbnRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvdG9uLXNpZ3VpZW50ZScpXG4gIGxldCBzbGlkZXJQcm9kdWN0b3NcblxuICBjb25zdCByZWNvcnJlckNsYXNlcyA9ICgpID0+IHtcbiAgICBwcm9kdWN0b3MuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGl0ZW0uc3R5bGUuekluZGV4ID0gYCR7aW5kZXh9YFxuICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLXByb2R1Y3Rvc19faW1hZ2VuLS10cmFuc3BhcmVudGUnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXItcHJvZHVjdG9zX19pbWFnZW4tLXRyYW5zcGFyZW50ZScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGFncmFnYXJTbGlkZXIgPSAoKSA9PiB7XG4gICAgc2xpZGVyUHJvZHVjdG9zID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgcHJvZHVjdG9zW3Byb2R1Y3Rvcy5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItcHJvZHVjdG9zX19pbWFnZW4tLXRyYW5zcGFyZW50ZScpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbGV0IHVsdGltbyA9IHByb2R1Y3Rvcy5wb3AoKVxuICAgICAgICBwcm9kdWN0b3MudW5zaGlmdCh1bHRpbW8pXG4gICAgICAgIHByb2R1Y3Rvc1swXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXItcHJvZHVjdG9zX19pbWFnZW4tLXRyYW5zcGFyZW50ZScpXG4gICAgICAgIHJlY29ycmVyQ2xhc2VzKClcbiAgICAgIH0sIDQwMClcbiAgICB9LCA1MDAwKVxuICB9XG5cbiAgY29uc3QgcHJvZHVjdG9BbnRlcmlvciA9ICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKHNsaWRlclByb2R1Y3RvcylcbiAgICBsZXQgcHJpbWVybyA9IHByb2R1Y3Rvcy5zaGlmdCgpXG4gICAgcHJvZHVjdG9zLnB1c2gocHJpbWVybylcbiAgICByZWNvcnJlckNsYXNlcygpXG4gICAgYWdyYWdhclNsaWRlcigpXG4gIH1cblxuICBjb25zdCBwcm9kdWN0b1NpZ3VpZW50ZSA9ICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKHNsaWRlclByb2R1Y3RvcylcbiAgICBsZXQgdWx0aW1vID0gcHJvZHVjdG9zLnBvcCgpXG4gICAgdWx0aW1vLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1wcm9kdWN0b3NfX2ltYWdlbi0tdHJhbnNwYXJlbnRlJylcbiAgICBwcm9kdWN0b3MudW5zaGlmdCh1bHRpbW8pXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZWNvcnJlckNsYXNlcygpXG4gICAgfSwgNDAwKVxuICAgIGFncmFnYXJTbGlkZXIoKVxuICB9XG5cbiAgcmVjb3JyZXJDbGFzZXMoKVxuICBhZ3JhZ2FyU2xpZGVyKClcblxuICBpZiAoYW50ZXJpb3IpIGFudGVyaW9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcHJvZHVjdG9BbnRlcmlvcigpKVxuICBpZiAoc2lndWllbnRlKSBzaWd1aWVudGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBwcm9kdWN0b1NpZ3VpZW50ZSgpKVxufVxuIl19
