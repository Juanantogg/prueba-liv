'use strict';var doc=document.documentElement;var menu=document.getElementById('menu');var bottonMenu=document.getElementById('botton-menu');var navegacionPrincipal=document.getElementById('navegacion-principal');var submenu=document.getElementById('submenu');var nosotros=document.getElementById('nosotros');var nosotrosItem=document.getElementById('nosotros-item');// const imagenSlider = document.querySelectorAll('.slider__imagen')
// let arraySlider = Array.from(imagenSlider)
// const bottonSlider = document.getElementById('botton-slider')
var arriba=document.getElementById('arriba');var acordeon=document.getElementsByClassName('responsabilidad__acordeon');var responsabilidadContenido=document.getElementsByClassName('responsabilidad__contenido');var flechas=document.getElementsByClassName('responsabilidad__flecha');var expandirMenu=function expandirMenu(){bottonMenu.classList.toggle('botton-menu__logo--cerrar');navegacionPrincipal.classList.toggle('navegacion-principal--extendida');navegacionPrincipal.classList.remove('navegacion-principal--extendida2');nosotrosItem.classList.remove('navegacion-principal__nosotros--giro');submenu.classList.remove('navegacion-principal__dos--extendida')};var expandirSubmenu=function expandirSubmenu(){nosotrosItem.classList.toggle('navegacion-principal__nosotros--giro');navegacionPrincipal.classList.toggle('navegacion-principal--extendida2');submenu.classList.toggle('navegacion-principal__dos--extendida')};// const animacionSlide = () => {
//   if (window.location.pathname === '/') {
//     arraySlider.forEach((imagen, index) => {
//       imagen.style.left = `${(index - 1) * 100}%`
//       if (imagen.style.left === '0%') {
//         imagen.style.zIndex = '10'
//       }
//       if (imagen.style.left === '200%') {
//         imagen.style.zIndex = '-10'
//       }
//     })
//   }
// }
// let intervaloSlider = setInterval(() => {
//   let primerImagen = arraySlider.shift()
//   arraySlider.push(primerImagen)
//   animacionSlide()
// }, 5000)
// const cambiarImagen = () => {
//   clearInterval(intervaloSlider)
//   let intervaloSlider1 = setInterval(() => {
//     let primerImagen = arraySlider.shift()
//     arraySlider.push(primerImagen)
//     animacionSlide()
//     clearInterval(intervaloSlider1)
//   }, 100)
//   intervaloSlider = setInterval(() => {
//     let primerImagen = arraySlider.shift()
//     arraySlider.push(primerImagen)
//     animacionSlide()
//   }, 5000)
// }
var subir=function subir(){var scrollStep=-window.scrollY/(500/3);var scrollInterval=setInterval(function(){if(window.scrollY!==0){window.scrollBy(500,scrollStep)}else clearInterval(scrollInterval)},1)};var bajar=function bajar(scroll){var bajar=setInterval(function(){doc.scrollTop+=scroll/40;if(doc.scrollTop>scroll){clearInterval(bajar)}},10)};var mostrarBotonArriba=function mostrarBotonArriba(){if(document.documentElement.scrollTop>400&&arriba){arriba.style.right='1em'}else{arriba.style.right='-5em'}};var mostrarFase=function mostrarFase(index){var span=Array.from(flechas);var contenido=Array.from(responsabilidadContenido);contenido.forEach(function(item,i){if(i===index){item.classList.toggle('responsabilidad__contenido--extendido');span[i].classList.toggle('responsabilidad__flecha--giro')}else{span[i].classList.remove('responsabilidad__flecha--giro');item.classList.remove('responsabilidad__contenido--extendido')}});if(!Array.from(contenido[0].classList).includes('responsabilidad__contenido--extendido')&&!Array.from(contenido[1].classList).includes('responsabilidad__contenido--extendido')){subir()}if(window.matchMedia('(max-width: 300px)').matches&&Array.from(contenido[index].classList).includes('responsabilidad__contenido--extendido')){bajar(490)}else if(window.matchMedia('(min-width: 305px)').matches&&window.matchMedia('(max-width: 574px)').matches&&Array.from(contenido[index].classList).includes('responsabilidad__contenido--extendido')){bajar(430)}else if(window.matchMedia('(min-width: 575px)').matches&&window.matchMedia('(max-width: 719px)').matches&&Array.from(contenido[index].classList).includes('responsabilidad__contenido--extendido')){bajar(380)}else if(window.matchMedia('(min-width: 720px)').matches&&window.matchMedia('(max-width: 888px)').matches&&Array.from(contenido[index].classList).includes('responsabilidad__contenido--extendido')){bajar(550)}else if(window.matchMedia('(min-width: 889px)').matches&&Array.from(contenido[index].classList).includes('responsabilidad__contenido--extendido')){bajar(470)}};menu.addEventListener('click',function(){return expandirMenu()});nosotros.addEventListener('click',function(){return expandirSubmenu()});// if (bottonSlider) bottonSlider.addEventListener('click', () => cambiarImagen())
if(acordeon)Array.from(acordeon).forEach(function(fase,index){return fase.addEventListener('click',function(){return mostrarFase(index)})});window.addEventListener('scroll',function(){return mostrarBotonArriba()});if(arriba)arriba.addEventListener('click',function(){return subir()});// window.addEventListener('click', (e) => {
//   e.preventDefault()
//   if (Array.from(bottonMenu.classList).includes('botton-menu__logo--cerrar')) {
//     bottonMenu.classList.remove('botton-menu__logo--cerrar')
//   }
//   navegacionPrincipal.classList.remove('navegacion-principal--extendida')
//   navegacionPrincipal.classList.remove('navegacion-principal--extendida2')
//   nosotrosItem.classList.remove('navegacion-principal__nosotros--giro')
//   submenu.classList.remove('navegacion-principal__dos--extendida')
// })
window.addEventListener('load',function(){if(window.location.pathname.includes('blog.html')){var estiloVida=document.getElementById('estilo-vida');var bienestar=document.getElementById('bienestar');var tendencias=document.getElementById('tendencias');console.log(estiloVida.children[0]);console.log(estiloVida.children[0].clientHeight);console.log(bienestar.childElementCount);console.log(tendencias.childElementCount)}});/*
  807
  1143
 */if(window.location.pathname.includes('productos')||window.location.pathname==='/prueba-liv/'||window.location.pathname==='/'){// const bottonSlider = document.getElementById('botton-slider')
var productos=Array.from(document.getElementsByClassName('slider-productos__imagen'));var anterior=document.getElementById('boton-anterior');var siguiente=document.getElementById('boton-siguiente');var sliderProductos=void 0;var recorrerClases=function recorrerClases(){productos.forEach(function(item,index){item.style.zIndex=''+index;if(index===0){item.classList.add('slider-productos__imagen--transparente')}else{item.classList.remove('slider-productos__imagen--transparente')}})};var agragarSlider=function agragarSlider(){sliderProductos=setInterval(function(){productos[productos.length-1].classList.add('slider-productos__imagen--transparente');setTimeout(function(){var ultimo=productos.pop();productos.unshift(ultimo);productos[0].classList.remove('slider-productos__imagen--transparente');recorrerClases()},400)},5000)};var productoAnterior=function productoAnterior(){clearInterval(sliderProductos);var primero=productos.shift();productos.push(primero);recorrerClases();agragarSlider()};var productoSiguiente=function productoSiguiente(){clearInterval(sliderProductos);var ultimo=productos.pop();ultimo.classList.add('slider-productos__imagen--transparente');productos.unshift(ultimo);setTimeout(function(){recorrerClases()},400);agragarSlider()};recorrerClases();agragarSlider();if(anterior)anterior.addEventListener('click',function(){return productoAnterior()});if(siguiente)siguiente.addEventListener('click',function(){return productoSiguiente()})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJtYXNvbnJ5LmpzIiwic2xpZGVyLXByb2R1Y3Rvcy5qcyJdLCJuYW1lcyI6WyJkb2MiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsIm1lbnUiLCJnZXRFbGVtZW50QnlJZCIsImJvdHRvbk1lbnUiLCJuYXZlZ2FjaW9uUHJpbmNpcGFsIiwic3VibWVudSIsIm5vc290cm9zIiwibm9zb3Ryb3NJdGVtIiwiYXJyaWJhIiwiYWNvcmRlb24iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicmVzcG9uc2FiaWxpZGFkQ29udGVuaWRvIiwiZmxlY2hhcyIsImV4cGFuZGlyTWVudSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImV4cGFuZGlyU3VibWVudSIsInN1YmlyIiwic2Nyb2xsU3RlcCIsIndpbmRvdyIsInNjcm9sbFkiLCJzY3JvbGxJbnRlcnZhbCIsInNldEludGVydmFsIiwic2Nyb2xsQnkiLCJjbGVhckludGVydmFsIiwiYmFqYXIiLCJzY3JvbGwiLCJzY3JvbGxUb3AiLCJtb3N0cmFyQm90b25BcnJpYmEiLCJzdHlsZSIsInJpZ2h0IiwibW9zdHJhckZhc2UiLCJpbmRleCIsInNwYW4iLCJBcnJheSIsImZyb20iLCJjb250ZW5pZG8iLCJmb3JFYWNoIiwiaXRlbSIsImkiLCJpbmNsdWRlcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZhc2UiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiZXN0aWxvVmlkYSIsImJpZW5lc3RhciIsInRlbmRlbmNpYXMiLCJjb25zb2xlIiwibG9nIiwiY2hpbGRyZW4iLCJjbGllbnRIZWlnaHQiLCJjaGlsZEVsZW1lbnRDb3VudCIsInByb2R1Y3RvcyIsImFudGVyaW9yIiwic2lndWllbnRlIiwic2xpZGVyUHJvZHVjdG9zIiwicmVjb3JyZXJDbGFzZXMiLCJ6SW5kZXgiLCJhZGQiLCJhZ3JhZ2FyU2xpZGVyIiwibGVuZ3RoIiwic2V0VGltZW91dCIsInVsdGltbyIsInBvcCIsInVuc2hpZnQiLCJwcm9kdWN0b0FudGVyaW9yIiwicHJpbWVybyIsInNoaWZ0IiwicHVzaCIsInByb2R1Y3RvU2lndWllbnRlIl0sIm1hcHBpbmdzIjoiYUFBQSxHQUFBQSxLQUFBQyxTQUFBQyxlQUFBLENBQ0EsR0FBQUMsTUFBQUYsU0FBQUcsY0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUNBLEdBQUFDLFlBQUFKLFNBQUFHLGNBQUEsQ0FBQSxhQUFBLENBQUEsQ0FDQSxHQUFBRSxxQkFBQUwsU0FBQUcsY0FBQSxDQUFBLHNCQUFBLENBQUEsQ0FDQSxHQUFBRyxTQUFBTixTQUFBRyxjQUFBLENBQUEsU0FBQSxDQUFBLENBQ0EsR0FBQUksVUFBQVAsU0FBQUcsY0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUNBLEdBQUFLLGNBQUFSLFNBQUFHLGNBQUEsQ0FBQSxlQUFBLENBQUEsQ0FDQTtBQUNBO0FBQ0E7QUFDQSxHQUFBTSxRQUFBVCxTQUFBRyxjQUFBLENBQUEsUUFBQSxDQUFBLENBQ0EsR0FBQU8sVUFBQVYsU0FBQVcsc0JBQUEsQ0FBQSwyQkFBQSxDQUFBLENBQ0EsR0FBQUMsMEJBQUFaLFNBQUFXLHNCQUFBLENBQUEsNEJBQUEsQ0FBQSxDQUNBLEdBQUFFLFNBQUFiLFNBQUFXLHNCQUFBLENBQUEseUJBQUEsQ0FBQSxDQUVBLEdBQUFHLGNBQUEsUUFBQUEsYUFBQSxFQUFBLENBQ0FWLFdBQUFXLFNBQUEsQ0FBQUMsTUFBQSxDQUFBLDJCQUFBLEVBQ0FYLG9CQUFBVSxTQUFBLENBQUFDLE1BQUEsQ0FBQSxpQ0FBQSxFQUNBWCxvQkFBQVUsU0FBQSxDQUFBRSxNQUFBLENBQUEsa0NBQUEsRUFDQVQsYUFBQU8sU0FBQSxDQUFBRSxNQUFBLENBQUEsc0NBQUEsRUFDQVgsUUFBQVMsU0FBQSxDQUFBRSxNQUFBLENBQUEsc0NBQUEsQ0FDQSxDQU5BLENBUUEsR0FBQUMsaUJBQUEsUUFBQUEsZ0JBQUEsRUFBQSxDQUNBVixhQUFBTyxTQUFBLENBQUFDLE1BQUEsQ0FBQSxzQ0FBQSxFQUNB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QUNBRyxnQkFFQSxHQUFBTixRQUFBLENBQUFBLFNBQUFiLGdCQUFBLENBQUEsT0FBQSxDQUFBLGlCQUFBeUIsbUJBQUEsQ0FBQSxFQUNBLEdBQUFYLFNBQUEsQ0FBQUEsVUFBQWQsZ0JBQUEsQ0FBQSxPQUFBLENBQUEsaUJBQUE2QixvQkFBQSxDQUFBLENBQ0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuY29uc3QgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51JylcbmNvbnN0IGJvdHRvbk1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm90dG9uLW1lbnUnKVxuY29uc3QgbmF2ZWdhY2lvblByaW5jaXBhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZlZ2FjaW9uLXByaW5jaXBhbCcpXG5jb25zdCBzdWJtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1lbnUnKVxuY29uc3Qgbm9zb3Ryb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9zb3Ryb3MnKVxuY29uc3Qgbm9zb3Ryb3NJdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vc290cm9zLWl0ZW0nKVxuLy8gY29uc3QgaW1hZ2VuU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9faW1hZ2VuJylcbi8vIGxldCBhcnJheVNsaWRlciA9IEFycmF5LmZyb20oaW1hZ2VuU2xpZGVyKVxuLy8gY29uc3QgYm90dG9uU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvdHRvbi1zbGlkZXInKVxuY29uc3QgYXJyaWJhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FycmliYScpXG5jb25zdCBhY29yZGVvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3BvbnNhYmlsaWRhZF9fYWNvcmRlb24nKVxuY29uc3QgcmVzcG9uc2FiaWxpZGFkQ29udGVuaWRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8nKVxuY29uc3QgZmxlY2hhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3BvbnNhYmlsaWRhZF9fZmxlY2hhJylcblxuY29uc3QgZXhwYW5kaXJNZW51ID0gKCkgPT4ge1xuICBib3R0b25NZW51LmNsYXNzTGlzdC50b2dnbGUoJ2JvdHRvbi1tZW51X19sb2dvLS1jZXJyYXInKVxuICBuYXZlZ2FjaW9uUHJpbmNpcGFsLmNsYXNzTGlzdC50b2dnbGUoJ25hdmVnYWNpb24tcHJpbmNpcGFsLS1leHRlbmRpZGEnKVxuICBuYXZlZ2FjaW9uUHJpbmNpcGFsLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmVnYWNpb24tcHJpbmNpcGFsLS1leHRlbmRpZGEyJylcbiAgbm9zb3Ryb3NJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmVnYWNpb24tcHJpbmNpcGFsX19ub3NvdHJvcy0tZ2lybycpXG4gIHN1Ym1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWxfX2Rvcy0tZXh0ZW5kaWRhJylcbn1cblxuY29uc3QgZXhwYW5kaXJTdWJtZW51ID0gKCkgPT4ge1xuICBub3NvdHJvc0l0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWxfX25vc290cm9zLS1naXJvJylcbiAgbmF2ZWdhY2lvblByaW5jaXBhbC5jbGFzc0xpc3QudG9nZ2xlKCduYXZlZ2FjaW9uLXByaW5jaXBhbC0tZXh0ZW5kaWRhMicpXG4gIHN1Ym1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWxfX2Rvcy0tZXh0ZW5kaWRhJylcbn1cblxuLy8gY29uc3QgYW5pbWFjaW9uU2xpZGUgPSAoKSA9PiB7XG4vLyAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvJykge1xuLy8gICAgIGFycmF5U2xpZGVyLmZvckVhY2goKGltYWdlbiwgaW5kZXgpID0+IHtcbi8vICAgICAgIGltYWdlbi5zdHlsZS5sZWZ0ID0gYCR7KGluZGV4IC0gMSkgKiAxMDB9JWBcbi8vICAgICAgIGlmIChpbWFnZW4uc3R5bGUubGVmdCA9PT0gJzAlJykge1xuLy8gICAgICAgICBpbWFnZW4uc3R5bGUuekluZGV4ID0gJzEwJ1xuLy8gICAgICAgfVxuLy8gICAgICAgaWYgKGltYWdlbi5zdHlsZS5sZWZ0ID09PSAnMjAwJScpIHtcbi8vICAgICAgICAgaW1hZ2VuLnN0eWxlLnpJbmRleCA9ICctMTAnXG4vLyAgICAgICB9XG4vLyAgICAgfSlcbi8vICAgfVxuLy8gfVxuXG4vLyBsZXQgaW50ZXJ2YWxvU2xpZGVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuLy8gICBsZXQgcHJpbWVySW1hZ2VuID0gYXJyYXlTbGlkZXIuc2hpZnQoKVxuLy8gICBhcnJheVNsaWRlci5wdXNoKHByaW1lckltYWdlbilcbi8vICAgYW5pbWFjaW9uU2xpZGUoKVxuLy8gfSwgNTAwMClcblxuLy8gY29uc3QgY2FtYmlhckltYWdlbiA9ICgpID0+IHtcbi8vICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbG9TbGlkZXIpXG4vLyAgIGxldCBpbnRlcnZhbG9TbGlkZXIxID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuLy8gICAgIGxldCBwcmltZXJJbWFnZW4gPSBhcnJheVNsaWRlci5zaGlmdCgpXG4vLyAgICAgYXJyYXlTbGlkZXIucHVzaChwcmltZXJJbWFnZW4pXG4vLyAgICAgYW5pbWFjaW9uU2xpZGUoKVxuLy8gICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxvU2xpZGVyMSlcbi8vICAgfSwgMTAwKVxuLy8gICBpbnRlcnZhbG9TbGlkZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4vLyAgICAgbGV0IHByaW1lckltYWdlbiA9IGFycmF5U2xpZGVyLnNoaWZ0KClcbi8vICAgICBhcnJheVNsaWRlci5wdXNoKHByaW1lckltYWdlbilcbi8vICAgICBhbmltYWNpb25TbGlkZSgpXG4vLyAgIH0sIDUwMDApXG4vLyB9XG5cbmNvbnN0IHN1YmlyID0gKCkgPT4ge1xuICBsZXQgc2Nyb2xsU3RlcCA9IC13aW5kb3cuc2Nyb2xsWSAvICg1MDAgLyAzKVxuICBsZXQgc2Nyb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgaWYgKHdpbmRvdy5zY3JvbGxZICE9PSAwKSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsQnkoNTAwLCBzY3JvbGxTdGVwKVxuICAgIH0gZWxzZSBjbGVhckludGVydmFsKHNjcm9sbEludGVydmFsKVxuICB9LCAxKVxufVxuXG5jb25zdCBiYWphciA9IChzY3JvbGwpID0+IHtcbiAgbGV0IGJhamFyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGRvYy5zY3JvbGxUb3AgKz0gc2Nyb2xsIC8gNDBcbiAgICBpZiAoZG9jLnNjcm9sbFRvcCA+IHNjcm9sbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChiYWphcilcbiAgICB9XG4gIH0sIDEwKVxufVxuXG5jb25zdCBtb3N0cmFyQm90b25BcnJpYmEgPSAoKSA9PiB7XG4gIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID4gNDAwICYmIGFycmliYSkge1xuICAgIGFycmliYS5zdHlsZS5yaWdodCA9ICcxZW0nXG4gIH0gZWxzZSB7XG4gICAgYXJyaWJhLnN0eWxlLnJpZ2h0ID0gJy01ZW0nXG4gIH1cbn1cblxuY29uc3QgbW9zdHJhckZhc2UgPSAoaW5kZXgpID0+IHtcbiAgbGV0IHNwYW4gPSBBcnJheS5mcm9tKGZsZWNoYXMpXG4gIGxldCBjb250ZW5pZG8gPSBBcnJheS5mcm9tKHJlc3BvbnNhYmlsaWRhZENvbnRlbmlkbylcblxuICBjb250ZW5pZG8uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuICAgIGlmIChpID09PSBpbmRleCkge1xuICAgICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdyZXNwb25zYWJpbGlkYWRfX2NvbnRlbmlkby0tZXh0ZW5kaWRvJylcbiAgICAgIHNwYW5baV0uY2xhc3NMaXN0LnRvZ2dsZSgncmVzcG9uc2FiaWxpZGFkX19mbGVjaGEtLWdpcm8nKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGFuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc3BvbnNhYmlsaWRhZF9fZmxlY2hhLS1naXJvJylcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpXG4gICAgfVxuICB9KVxuXG4gIGlmICghQXJyYXkuZnJvbShjb250ZW5pZG9bMF0uY2xhc3NMaXN0KS5pbmNsdWRlcygncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpICYmXG4gICAgICAhQXJyYXkuZnJvbShjb250ZW5pZG9bMV0uY2xhc3NMaXN0KS5pbmNsdWRlcygncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpKSB7XG4gICAgc3ViaXIoKVxuICB9XG5cbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiAzMDBweCknKS5tYXRjaGVzICYmXG4gICAgICBBcnJheS5mcm9tKGNvbnRlbmlkb1tpbmRleF0uY2xhc3NMaXN0KS5pbmNsdWRlcygncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpKSB7XG4gICAgYmFqYXIoNDkwKVxuICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAzMDVweCknKS5tYXRjaGVzICYmXG4gICAgICAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDU3NHB4KScpLm1hdGNoZXMgJiZcbiAgICAgICAgICAgICBBcnJheS5mcm9tKGNvbnRlbmlkb1tpbmRleF0uY2xhc3NMaXN0KS5pbmNsdWRlcygncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpKSB7XG4gICAgYmFqYXIoNDMwKVxuICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA1NzVweCknKS5tYXRjaGVzICYmXG4gICAgICAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDcxOXB4KScpLm1hdGNoZXMgJiZcbiAgICAgICAgICAgICBBcnJheS5mcm9tKGNvbnRlbmlkb1tpbmRleF0uY2xhc3NMaXN0KS5pbmNsdWRlcygncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpKSB7XG4gICAgYmFqYXIoMzgwKVxuICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA3MjBweCknKS5tYXRjaGVzICYmXG4gICAgICAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDg4OHB4KScpLm1hdGNoZXMgJiZcbiAgICAgICAgICAgICBBcnJheS5mcm9tKGNvbnRlbmlkb1tpbmRleF0uY2xhc3NMaXN0KS5pbmNsdWRlcygncmVzcG9uc2FiaWxpZGFkX19jb250ZW5pZG8tLWV4dGVuZGlkbycpKSB7XG4gICAgYmFqYXIoNTUwKVxuICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA4ODlweCknKS5tYXRjaGVzICYmXG4gICAgICAgICAgICAgQXJyYXkuZnJvbShjb250ZW5pZG9baW5kZXhdLmNsYXNzTGlzdCkuaW5jbHVkZXMoJ3Jlc3BvbnNhYmlsaWRhZF9fY29udGVuaWRvLS1leHRlbmRpZG8nKSkge1xuICAgIGJhamFyKDQ3MClcbiAgfVxufVxuXG5tZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZXhwYW5kaXJNZW51KCkpXG5ub3NvdHJvcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGV4cGFuZGlyU3VibWVudSgpKVxuLy8gaWYgKGJvdHRvblNsaWRlcikgYm90dG9uU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2FtYmlhckltYWdlbigpKVxuaWYgKGFjb3JkZW9uKSBBcnJheS5mcm9tKGFjb3JkZW9uKS5mb3JFYWNoKChmYXNlLCBpbmRleCkgPT4gZmFzZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG1vc3RyYXJGYXNlKGluZGV4KSkpXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4gbW9zdHJhckJvdG9uQXJyaWJhKCkpXG5pZiAoYXJyaWJhKSBhcnJpYmEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzdWJpcigpKVxuLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbi8vICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4vLyAgIGlmIChBcnJheS5mcm9tKGJvdHRvbk1lbnUuY2xhc3NMaXN0KS5pbmNsdWRlcygnYm90dG9uLW1lbnVfX2xvZ28tLWNlcnJhcicpKSB7XG4vLyAgICAgYm90dG9uTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdib3R0b24tbWVudV9fbG9nby0tY2VycmFyJylcbi8vICAgfVxuLy8gICBuYXZlZ2FjaW9uUHJpbmNpcGFsLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmVnYWNpb24tcHJpbmNpcGFsLS1leHRlbmRpZGEnKVxuLy8gICBuYXZlZ2FjaW9uUHJpbmNpcGFsLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmVnYWNpb24tcHJpbmNpcGFsLS1leHRlbmRpZGEyJylcbi8vICAgbm9zb3Ryb3NJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmVnYWNpb24tcHJpbmNpcGFsX19ub3NvdHJvcy0tZ2lybycpXG4vLyAgIHN1Ym1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnbmF2ZWdhY2lvbi1wcmluY2lwYWxfX2Rvcy0tZXh0ZW5kaWRhJylcbi8vIH0pXG4iLCJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygnYmxvZy5odG1sJykpIHtcbiAgICBjb25zdCBlc3RpbG9WaWRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VzdGlsby12aWRhJylcbiAgICBjb25zdCBiaWVuZXN0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmllbmVzdGFyJylcbiAgICBjb25zdCB0ZW5kZW5jaWFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbmRlbmNpYXMnKVxuXG4gICAgY29uc29sZS5sb2coZXN0aWxvVmlkYS5jaGlsZHJlblswXSlcbiAgICBjb25zb2xlLmxvZyhlc3RpbG9WaWRhLmNoaWxkcmVuWzBdLmNsaWVudEhlaWdodClcbiAgICBjb25zb2xlLmxvZyhiaWVuZXN0YXIuY2hpbGRFbGVtZW50Q291bnQpXG4gICAgY29uc29sZS5sb2codGVuZGVuY2lhcy5jaGlsZEVsZW1lbnRDb3VudClcbiAgfVxufSlcblxuLypcbiAgODA3XG4gIDExNDNcbiAqL1xuIiwiaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygncHJvZHVjdG9zJykgfHxcbiAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvcHJ1ZWJhLWxpdi8nIHx8XG4gICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnLycpIHtcbiAgLy8gY29uc3QgYm90dG9uU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvdHRvbi1zbGlkZXInKVxuICBjb25zdCBwcm9kdWN0b3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NsaWRlci1wcm9kdWN0b3NfX2ltYWdlbicpKVxuICBjb25zdCBhbnRlcmlvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3Rvbi1hbnRlcmlvcicpXG4gIGNvbnN0IHNpZ3VpZW50ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3Rvbi1zaWd1aWVudGUnKVxuICBsZXQgc2xpZGVyUHJvZHVjdG9zXG5cbiAgY29uc3QgcmVjb3JyZXJDbGFzZXMgPSAoKSA9PiB7XG4gICAgcHJvZHVjdG9zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpdGVtLnN0eWxlLnpJbmRleCA9IGAke2luZGV4fWBcbiAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1wcm9kdWN0b3NfX2ltYWdlbi0tdHJhbnNwYXJlbnRlJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyLXByb2R1Y3Rvc19faW1hZ2VuLS10cmFuc3BhcmVudGUnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdCBhZ3JhZ2FyU2xpZGVyID0gKCkgPT4ge1xuICAgIHNsaWRlclByb2R1Y3RvcyA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHByb2R1Y3Rvc1twcm9kdWN0b3MubGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLXByb2R1Y3Rvc19faW1hZ2VuLS10cmFuc3BhcmVudGUnKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGxldCB1bHRpbW8gPSBwcm9kdWN0b3MucG9wKClcbiAgICAgICAgcHJvZHVjdG9zLnVuc2hpZnQodWx0aW1vKVxuICAgICAgICBwcm9kdWN0b3NbMF0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyLXByb2R1Y3Rvc19faW1hZ2VuLS10cmFuc3BhcmVudGUnKVxuICAgICAgICByZWNvcnJlckNsYXNlcygpXG4gICAgICB9LCA0MDApXG4gICAgfSwgNTAwMClcbiAgfVxuXG4gIGNvbnN0IHByb2R1Y3RvQW50ZXJpb3IgPSAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbChzbGlkZXJQcm9kdWN0b3MpXG4gICAgbGV0IHByaW1lcm8gPSBwcm9kdWN0b3Muc2hpZnQoKVxuICAgIHByb2R1Y3Rvcy5wdXNoKHByaW1lcm8pXG4gICAgcmVjb3JyZXJDbGFzZXMoKVxuICAgIGFncmFnYXJTbGlkZXIoKVxuICB9XG5cbiAgY29uc3QgcHJvZHVjdG9TaWd1aWVudGUgPSAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbChzbGlkZXJQcm9kdWN0b3MpXG4gICAgbGV0IHVsdGltbyA9IHByb2R1Y3Rvcy5wb3AoKVxuICAgIHVsdGltby5jbGFzc0xpc3QuYWRkKCdzbGlkZXItcHJvZHVjdG9zX19pbWFnZW4tLXRyYW5zcGFyZW50ZScpXG4gICAgcHJvZHVjdG9zLnVuc2hpZnQodWx0aW1vKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVjb3JyZXJDbGFzZXMoKVxuICAgIH0sIDQwMClcbiAgICBhZ3JhZ2FyU2xpZGVyKClcbiAgfVxuXG4gIHJlY29ycmVyQ2xhc2VzKClcbiAgYWdyYWdhclNsaWRlcigpXG5cbiAgaWYgKGFudGVyaW9yKSBhbnRlcmlvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHByb2R1Y3RvQW50ZXJpb3IoKSlcbiAgaWYgKHNpZ3VpZW50ZSkgc2lndWllbnRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcHJvZHVjdG9TaWd1aWVudGUoKSlcbn1cbiJdfQ==
